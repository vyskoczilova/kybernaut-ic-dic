!function(i){var l="";function o(){var o;switch(woolab.ares_fill&&(i(".woolab-ic-dic-tip").remove(),n()),i("#billing_ic_field").slideDown(),i("#billing_dic_field").slideDown(),i("#billing_country").val()){case"SK":i("#billing_dic_dph_field").slideDown(),i("#billing_dic_field > label").addClass("woolab-ic-dic-required");break;case"CZ":i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required"),woolab.ares_check&&(c(o=i("#billing_ic")),o.bind("focusin",function(){l=o.val()}),o.donetyping(function(){o.val()!==l&&c(o)},500));break;default:i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required")}i("#billing_company_field").slideDown()}function e(i){i.removeClass("kbnt-wrong").removeClass("woocommerce-invalid")}function a(i){i.addClass("kbnt-wrong").addClass("woocommerce-invalid").removeClass("woocommerce-validated")}function n(){i("#billing_company").removeAttr("readonly"),i("#billing_dic").removeAttr("readonly"),i("#billing_postcode").removeAttr("readonly"),i("#billing_city").removeAttr("readonly"),i("#billing_address_1").removeAttr("readonly")}function c(o){var c=o.val();if(c!==l){var d=i("#billing_ic_field"),t='<span role="alert" class="woolab-ic-dic-tip">'+woolab.l18n_not_valid+"</span>";i(".woolab-ic-dic-tip").remove(),e(d),d.removeClass("kbnt-ok").removeClass("woocommerce-validated"),7!=c.length&&8!=c.length||null==c.match(/^[0-9]+$/)?(n(),c.length>0?a(d):e(d)):i.ajax({url:woolab.ajaxurl,data:{action:"ajaxAres",ico:c},beforeSend:function(){d.addClass("kbnt-validating"),d.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_validating+"</span>")},success:function(l){(d.removeClass("kbnt-validating"),l)?0==(l=JSON.parse(l)).error?(i(".woolab-ic-dic-tip").remove(),d.addClass("kbnt-ok").addClass("woocommerce-validated").removeClass("woocommerce-invalid"),woolab.ares_fill&&(i("#billing_company").val(l.spolecnost).attr("readonly",!0),i("#billing_dic").val(l.dic).attr("readonly",!0),i("#billing_address_1").val(l.adresa).attr("readonly",!0),i("#billing_postcode").val(l.psc).attr("readonly",!0),i("#billing_city").val(l.mesto).attr("readonly",!0),d.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_ok+"</span>"),i("body").trigger("update_checkout"))):(r(d),i(".woolab-ic-dic-tip").length>0&&i(".woolab-ic-dic-tip").remove(),n(),d.append('<span role="alert" class="woolab-ic-dic-tip error">'+l.error+"</span>")):(r(d),0==i(".woolab-ic-dic-tip").length&&(n(),d.append(t)))},error:function(l){0==i(".woolab-ic-dic-tip").length&&(o.val(""),r(d),d.append('<span role="alert" class="woolab-ic-dic-tip error">'+woolab.l18n_error+"</span>"))}}),l=o.val()}}function r(l){woolab.ares_fill&&(i("#billing_company").val(""),i("#billing_dic").val(""),i("#billing_postcode").val(""),i("#billing_city").val(""),i("#billing_address_1").val(""),n()),a(l)}i.fn.extend({donetyping:function(l,o){o=o||1e3;var e,a=function(i){e&&(e=null,l.call(i))};return this.each(function(l,n){var c=i(n);c.is(":input")&&c.on("keyup keypress paste",function(i){"keyup"==i.type&&8!=i.keyCode||(e&&clearTimeout(e),e=setTimeout(function(){a(n)},o))}).on("blur",function(){a(n)})})}}),i(document).ready(function(){i(".woolab-ic-dic-no_spaces input").bind("input",function(){i(this).val(function(i,l){return l.replace(/\s+/g,"")})});var l=i("#billing_iscomp");l.length&&!l.prop("checked")||o(),i(".woocommerce-billing-fields").on("change","#billing_country, #billing_iscomp",function(){var l=i("#billing_iscomp");!l.length||l.prop("checked")?o():i(".woolab-ic-dic-toggle").slideUp()})})}(jQuery);
