"use strict";!function(i){var l="";function e(){var e;switch(woolab.ares_fill&&(i(".woolab-ic-dic-tip").remove(),c()),i("#billing_ic_field").slideDown(),i("#billing_dic_field").slideDown(),i("#billing_country").val()){case"SK":i("#billing_dic_dph_field").slideDown(),i("#billing_dic_field > label").addClass("woolab-ic-dic-required");break;case"CZ":i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required");break;default:i("#billing_dic_dph_field").slideUp(),i("#billing_dic_field > label").removeClass("woolab-ic-dic-required")}woolab.ares_check&&(t(e=i("#billing_ic")),i(document.body).on("focusin","#billing_ic",function(){l=e.val()}),e.donetyping(function(){(e=i("#billing_ic")).val()!==l&&t(e)},500)),i("#billing_company_field").slideDown()}function n(){var l="SK"==i("#billing_country").val()?"billing_dic_dph":"billing_dic";i("#billing_company, #billing_ic, #billing_dic, #billing_dic_dph").each(function(e,n){n.getAttribute("data-value")&&(n.value=n.getAttribute("data-value"),n.id==l&&n.value.length&&i(document.body).trigger("update_checkout"))})}function o(i){i.removeClass("kbnt-wrong").removeClass("woocommerce-invalid")}function a(i){i.addClass("kbnt-wrong").addClass("woocommerce-invalid").removeClass("woocommerce-validated")}function c(){i("#billing_company").removeAttr("readonly"),i("#billing_dic").removeAttr("readonly"),i("#billing_postcode").removeAttr("readonly"),i("#billing_city").removeAttr("readonly"),i("#billing_address_1").removeAttr("readonly")}function t(e){if("CZ"===i("#billing_country").val()){var n=e.val();if(n!==l){var t=i("#billing_ic_field"),r='<span role="alert" class="woolab-ic-dic-tip">'+woolab.l18n_not_valid+"</span>";i(".woolab-ic-dic-tip").remove(),o(t),t.removeClass("kbnt-ok").removeClass("woocommerce-validated"),7!=n.length&&8!=n.length||null==n.match(/^[0-9]+$/)?(c(),n.length>0?a(t):o(t)):i.ajax({url:woolab.ajaxurl,data:{action:"ajaxAres",ico:n},beforeSend:function(){t.addClass("kbnt-validating"),t.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_validating+"</span>")},success:function(l){(t.removeClass("kbnt-validating"),l)?0==(l=JSON.parse(l)).error?(i(".woolab-ic-dic-tip").remove(),t.addClass("kbnt-ok").addClass("woocommerce-validated").removeClass("woocommerce-invalid"),woolab.ares_fill&&(i("#billing_same_as_shipping")&&i("#billing_same_as_shipping").is(":checked")&&i("#billing_same_as_shipping").click(),i("#billing_company").val(l.spolecnost).attr("readonly",!0),i("#billing_dic").val(l.dic).attr("readonly",!0),i("#billing_address_1").val(l.adresa).attr("readonly",!0),i("#billing_postcode").val(l.psc).attr("readonly",!0),i("#billing_city").val(l.mesto).attr("readonly",!0),t.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_ok+"</span>"),i("body").trigger("update_checkout"))):(d(t),i(".woolab-ic-dic-tip").length>0&&i(".woolab-ic-dic-tip").remove(),c(),t.append('<span role="alert" class="woolab-ic-dic-tip error">'+l.error+"</span>")):(d(t),0==i(".woolab-ic-dic-tip").length&&(c(),t.append(r)))},error:function(l){0==i(".woolab-ic-dic-tip").length&&(e.val(""),d(t),t.append('<span role="alert" class="woolab-ic-dic-tip error">'+woolab.l18n_error+"</span>"))}}),l=e.val()}}}function d(l){woolab.ares_fill&&(i("#billing_company").val(""),i("#billing_dic").val(""),i("#billing_postcode").val(""),i("#billing_city").val(""),i("#billing_address_1").val(""),c()),a(l)}i.fn.extend({donetyping:function(l,e){e=e||1e3;var n,o=function(i){n&&(n=null,l.call(i))};return this.each(function(l,a){var c=i(a);c.is(":input")&&i(document.body).on("keyup keypress paste",a,function(i){"keyup"==i.type&&8!=i.keyCode||(n&&clearTimeout(n),n=setTimeout(function(){o(a)},e))}),c.is(":input")&&i(document.body).on("blur",a,function(){o(a)})})}}),i(document).ready(function(){i(document.body).on("input",".woolab-ic-dic-no_spaces input",function(){i(this).val(function(i,l){return l.replace(/\s+/g,"")})});var l=i("#billing_iscomp");l.length&&!l.prop("checked")||(n(),e()),i(document.body).on("change","#billing_country, #billing_iscomp",function(){var l,o=i("#billing_iscomp");!o.length||o.prop("checked")?(n(),e()):(i(".woolab-ic-dic-toggle").slideUp(),l="SK"==i("#billing_country").val()?"billing_dic_dph":"billing_dic",i("#billing_company, #billing_ic, #billing_dic, #billing_dic_dph").each(function(e,n){n.setAttribute("data-value",n.value),n.id==l&&n.value.length&&i(document.body).trigger("update_checkout"),n.value=""}))}),i("#billing_dic, #billing_dic_dph").donetyping(function(){var l=i("#billing_country").val();"SK"!=l&&"billing_dic"==this.id&&i(document.body).trigger("update_checkout"),"SK"==l&&"billing_dic_dph"==this.id&&i(document.body).trigger("update_checkout")},750)})}(jQuery);